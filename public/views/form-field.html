<div class="form-group" ng-form="{{ field }}" ng-class="{ 'has-error': {{ field }}.$dirty && {{ field }}.$invalid }">

    <!-- ONLY SHOWN IF REQUIRED FIELD -->
    <label class="col-sm-2 control-label" for="{{ field | labelCase }}">
        {{ field | labelCase }} <span ng-if="required">*</span>
    </label>

    <!-- THE FIELD -->
    <div class="col-sm-6" ng-switch="required">

        <!-- REQUIRED FIELD -->
        <input id="{{ field | labelCase }}" ng-switch-when="true" ng-model="record[field][0]" type="{{ record[field][1] }}" class="form-control" required ng-change="update()"  ng-blur="blurUpdate()"/>

        <!-- NOT REQUIRED FIELD -->
        <div class="input-group" ng-switch-default>

            <input id="{{ field | labelCase }}" ng-model="record[field][0]" type="{{ record[field][1] }}" class="form-control" ng-change="update()"  ng-blur="blurUpdate()"/>
            <span class="input-group-btn">

                <button class="btn btn-default" ng-click="remove(field)">
                    <span class="glyphicon glyphicon-remove-circle"></span>
                </button>
            </span>
        </div>
    </div>

    <!-- ERROR MESSAGE -->
    <div class="col-sm-4 has-error" ng-show="{{ field }}.$dirty && {{ field }}.$invalid" ng-messages="this.$eval(field)['$error']">

        <!-- IF IS EMPTY -->
        <p class="control-label" ng-message="required"> {{ field | labelCase }} is required</p>

        <!-- IF IS INVALID -->
        <p class="control-label" ng-repeat="(k, v) in types" ng-message="{{ k }}">{{ field | labelCase }} {{ v[1] }}</p>
    </div>
</div>